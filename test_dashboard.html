<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Dashboard åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>âœ… æµ‹è¯• 1: å¸ƒå±€ç»“æ„</h2>
        <p class="success">å·²å®ç° 70-30 æ …æ ¼å¸ƒå±€</p>
        <ul>
            <li>å·¦ä¾§ä¸»åŒºåŸŸ (dashboard-main): åŒ…å«çŠ¶æ€å¢™ã€Uptimeå†å²ã€å“åº”æ—¶é—´å›¾ã€å‘Šè­¦å†å²</li>
            <li>å³ä¾§æ¬¡çº§ä¿¡æ¯æ  (dashboard-sidebar): åŒ…å«æ‘˜è¦å¡ç‰‡ã€SLAå¯¹æ¯”å›¾</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>âœ… æµ‹è¯• 2: SLA å¯¹æ¯”å›¾</h2>
        <p class="success">å·²æ›¿æ¢çŠ¶æ€æ—¶é•¿åˆ†å¸ƒä¸º SLA å¯¹æ¯”æ¨ªå‘æ¡å½¢å›¾</p>
        <ul>
            <li>æ˜¾ç¤ºæ¯ä¸ªç«™ç‚¹çš„ä»Šæ—¥ã€è¿‘7å¤©ã€è¿‘30å¤©å¯ç”¨ç‡</li>
            <li>ä½¿ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒ SLA ç­‰çº§</li>
            <li>åç«¯ API å·²è¿”å› sla_stats æ•°æ®</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>âœ… æµ‹è¯• 3: P95/P99 å¢å¼º</h2>
        <p class="success">å“åº”æ—¶é—´å¯¹æ¯”å›¾å·²å¢åŠ  P95/P99 çº¿</p>
        <ul>
            <li>åç«¯è®¡ç®—å¹¶è¿”å› p95_response_time å’Œ p99_response_time</li>
            <li>å‰ç«¯ä»¥è™šçº¿/ç‚¹çº¿æ˜¾ç¤º P95/P99 å‚è€ƒçº¿</li>
            <li>P95 ä½¿ç”¨è™šçº¿ï¼ˆdashedï¼‰ï¼ŒP99 ä½¿ç”¨ç‚¹çº¿ï¼ˆdottedï¼‰</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>âœ… æµ‹è¯• 4: Uptime å†å²å›¾è”åŠ¨</h2>
        <p class="success">å·²å®ç°ç‚¹å‡»å®•æœº/æ…¢å“åº”åˆ†æ®µè”åŠ¨å‘Šè­¦å†å²</p>
        <ul>
            <li>ç‚¹å‡»çº¢è‰²æˆ–é»„è‰²åˆ†æ®µæ—¶è§¦å‘è”åŠ¨</li>
            <li>è‡ªåŠ¨ç­›é€‰å‘Šè­¦ç±»å‹ï¼ˆå®•æœº/æ…¢å“åº”ï¼‰</li>
            <li>æ»šåŠ¨åˆ°å‘Šè­¦å†å²è¡¨æ ¼</li>
            <li>é«˜äº®åŒ¹é…çš„å‘Šè­¦è®°å½•ï¼ˆ3ç§’åæ¢å¤ï¼‰</li>
            <li>Tooltip ä¸­æ˜¾ç¤ºæç¤º "ğŸ’¡ ç‚¹å‡»æŸ¥çœ‹ç›¸å…³å‘Šè­¦"</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š API å“åº”ç¤ºä¾‹</h2>
        <pre id="api-response">åŠ è½½ä¸­...</pre>
    </div>

    <script>
        // æµ‹è¯• API
        fetch('/api/history?sites=è°·æ­Œ&start_time=2024-01-01T00:00:00&end_time=' + new Date().toISOString())
            .then(res => res.json())
            .then(data => {
                document.getElementById('api-response').textContent = JSON.stringify(data, null, 2);
            })
            .catch(err => {
                document.getElementById('api-response').textContent = 'Error: ' + err.message;
                document.getElementById('api-response').className = 'error';
            });
    </script>
</body>
</html>
